(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();const w={max:15,perspective:1e3,scale:1.05,speed:200,easing:"ease-out",reverse:!1,axis:null,reset:!0,glare:!1,maxGlare:.5,shadow:!1,gyroscope:"auto",disabled:!1,eventsEl:null};var E=class{container;inner;maxOpacity;constructor(e,t){this.maxOpacity=t,this.container=document.createElement("div"),this.container.classList.add("levita-glare"),this.inner=document.createElement("div"),this.inner.classList.add("levita-glare-inner"),this.container.appendChild(this.inner),e.appendChild(this.container),(!e.style.position||e.style.position==="static")&&(e.style.position="relative")}update=(e,t)=>{const i=(e+1)/2*100,o=(t+1)/2*100,r=Math.sqrt(e**2+t**2)/Math.SQRT2;this.inner.style.setProperty("--levita-glare-x",`${i}%`),this.inner.style.setProperty("--levita-glare-y",`${o}%`),this.inner.style.setProperty("--levita-glare-opacity",`${r*this.maxOpacity}`)};destroy=()=>{this.container.remove()}},P=class{el;maxOffset;constructor(e,t=20){this.el=e,this.maxOffset=t,this.el.classList.add("levita-shadow")}update=(e,t)=>{const i=e*this.maxOffset,o=t*this.maxOffset;this.el.style.setProperty("--levita-shadow-x",`${i}px`),this.el.style.setProperty("--levita-shadow-y",`${o}px`)};destroy=()=>{this.el.classList.remove("levita-shadow"),this.el.style.removeProperty("--levita-shadow-x"),this.el.style.removeProperty("--levita-shadow-y")}};const S=e=>{const t=e.querySelectorAll("[data-levita-offset]"),i=[];for(const o of t){const r=o.dataset.levitaOffset,s=Number.parseFloat(r??"0");Number.isNaN(s)||(o.style.setProperty("--levita-offset",String(s)),i.push({el:o,offset:s}))}return i},L=e=>{for(const t of e)t.el.style.removeProperty("--levita-offset")};var f=class v{onMove;axis;active=!1;permitted=!1;minAngle;maxAngle;smoothing;lastX=0;lastY=0;constructor(t,i,o=-45,r=45,s=.15){this.onMove=t,this.axis=i,this.minAngle=o,this.maxAngle=r,this.smoothing=s}static isSupported=()=>typeof window<"u"&&"DeviceOrientationEvent"in window;static needsPermission=()=>typeof DeviceOrientationEvent<"u"&&"requestPermission"in DeviceOrientationEvent;requestPermission=async()=>{if(!v.isSupported())return!1;if(!v.needsPermission())return this.permitted=!0,!0;try{return this.permitted=await DeviceOrientationEvent.requestPermission()==="granted",this.permitted}catch{return this.permitted=!1,!1}};start=()=>{this.active||!this.permitted||(this.active=!0,window.addEventListener("deviceorientation",this.handleOrientation))};stop=()=>{this.active&&(this.active=!1,window.removeEventListener("deviceorientation",this.handleOrientation))};setAxis=t=>{this.axis=t};handleOrientation=t=>{const i=t,o=i.beta??0,r=i.gamma??0,s=this.maxAngle-this.minAngle,n=this.axis==="y"?0:this.clamp((r-this.minAngle)/s*2-1),d=this.axis==="x"?0:this.clamp((o-this.minAngle)/s*2-1);this.lastX=this.lastX+(n-this.lastX)*this.smoothing,this.lastY=this.lastY+(d-this.lastY)*this.smoothing,this.onMove({x:this.lastX,y:this.lastY})};clamp=t=>Math.max(-1,Math.min(1,t))},b=class{eventsEl;onMove;onEnter;onLeave;axis;active=!1;rect=null;constructor(e,t,i,o,r,s=null){this.eventsEl=s??e,this.onMove=t,this.onEnter=i,this.onLeave=o,this.axis=r}start=()=>{this.active||(this.active=!0,this.eventsEl.addEventListener("pointermove",this.handlePointerMove),this.eventsEl.addEventListener("pointerenter",this.handlePointerEnter),this.eventsEl.addEventListener("pointerleave",this.handlePointerLeave))};stop=()=>{this.active&&(this.active=!1,this.eventsEl.removeEventListener("pointermove",this.handlePointerMove),this.eventsEl.removeEventListener("pointerenter",this.handlePointerEnter),this.eventsEl.removeEventListener("pointerleave",this.handlePointerLeave))};setAxis=e=>{this.axis=e};handlePointerMove=e=>{if(!this.rect)return;const t=(e.clientX-this.rect.left)/this.rect.width,i=(e.clientY-this.rect.top)/this.rect.height,o=this.axis==="y"?0:t*2-1,r=this.axis==="x"?0:i*2-1;this.onMove({x:o,y:r})};handlePointerEnter=()=>{this.rect=this.eventsEl.getBoundingClientRect(),this.onEnter?.()};handlePointerLeave=()=>{this.rect=null,this.onLeave?.()}},c=class{el;options;pointerSensor;motionSensor=null;glareEffect=null;shadowEffect=null;layers=[];listeners=new Map;destroyed=!1;gyroscopeRequested=!1;constructor(e,t={}){this.el=e,this.options={...w,...t},this.el.classList.add("levita"),this.applyBaseProperties(),this.layers=S(this.el),this.options.glare&&(this.glareEffect=new E(this.el,this.options.maxGlare)),this.options.shadow&&(this.shadowEffect=new P(this.el)),this.pointerSensor=new b(this.el,i=>this.handleSensorInput(i),()=>this.handleEnter(),()=>this.handleLeave(),this.options.axis,this.options.eventsEl),this.options.gyroscope!==!1&&f.isSupported()&&(this.motionSensor=new f(i=>this.handleSensorInput(i),this.options.axis),this.options.gyroscope==="auto"&&this.el.addEventListener("click",this.handleFirstTouch,{once:!0})),this.options.disabled||this.enable()}handleFirstTouch=async()=>{this.gyroscopeRequested||!this.motionSensor||(this.gyroscopeRequested=!0,await this.motionSensor.requestPermission()&&(this.pointerSensor.stop(),this.setTransition(!1),this.motionSensor.start()))};enable=()=>{this.destroyed||(this.options.disabled=!1,this.pointerSensor.start())};disable=()=>{this.options.disabled=!0,this.pointerSensor.stop(),this.motionSensor?.stop(),this.resetTransform()};requestPermission=async()=>{if(!this.motionSensor)return!1;const e=await this.motionSensor.requestPermission();return e&&(this.pointerSensor.stop(),this.setTransition(!1),this.motionSensor.start()),e};destroy=()=>{this.destroyed||(this.destroyed=!0,this.pointerSensor.stop(),this.motionSensor?.stop(),this.glareEffect?.destroy(),this.shadowEffect?.destroy(),L(this.layers),this.el.classList.remove("levita"),this.removeBaseProperties(),this.listeners.clear(),this.el.removeEventListener("click",this.handleFirstTouch))};on=(e,t)=>{this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e)?.add(t)};off=(e,t)=>{this.listeners.get(e)?.delete(t)};emit=(e,t)=>{const i=this.listeners.get(e);if(i)for(const o of i)o(t)};handleSensorInput=e=>{if(this.options.disabled)return;const t=this.options.reverse?-1:1,i=e.y*this.options.max*t,o=e.x*this.options.max*t*-1;this.el.style.setProperty("--levita-x",`${i}deg`),this.el.style.setProperty("--levita-y",`${o}deg`),this.el.style.setProperty("--levita-scale",String(this.options.scale)),this.el.style.setProperty("--levita-percent-x",String(e.x)),this.el.style.setProperty("--levita-percent-y",String(e.y)),this.glareEffect?.update(e.x,e.y),this.shadowEffect?.update(e.x,e.y);const r={x:i,y:o,percentX:e.x,percentY:e.y};this.emit("move",r)};handleEnter=()=>{this.setTransition(!1),this.el.style.setProperty("--levita-scale",String(this.options.scale)),this.emit("enter",void 0)};handleLeave=()=>{this.setTransition(!0),this.options.reset&&this.resetTransform(),this.emit("leave",void 0)};setTransition=e=>{this.el.style.setProperty("--levita-speed",e?`${this.options.speed}ms`:"0ms")};resetTransform=()=>{this.el.style.setProperty("--levita-x","0deg"),this.el.style.setProperty("--levita-y","0deg"),this.el.style.setProperty("--levita-scale","1"),this.el.style.setProperty("--levita-percent-x","0"),this.el.style.setProperty("--levita-percent-y","0"),this.glareEffect?.update(0,0),this.shadowEffect?.update(0,0)};applyBaseProperties=()=>{this.el.style.setProperty("--levita-perspective",`${this.options.perspective}px`),this.el.style.setProperty("--levita-speed",`${this.options.speed}ms`),this.el.style.setProperty("--levita-easing",this.options.easing)};removeBaseProperties=()=>{this.el.style.removeProperty("--levita-perspective"),this.el.style.removeProperty("--levita-speed"),this.el.style.removeProperty("--levita-easing"),this.el.style.removeProperty("--levita-x"),this.el.style.removeProperty("--levita-y"),this.el.style.removeProperty("--levita-scale"),this.el.style.removeProperty("--levita-percent-x"),this.el.style.removeProperty("--levita-percent-y")}};const h=(e,t)=>{const i=document.getElementById(e);if(i)return new c(i,t)};h("card-hero",{glare:!0,shadow:!0,gyroscope:!1});h("card-profile",{glare:!0,shadow:!0,gyroscope:!1});h("card-product",{glare:!0,shadow:!0,gyroscope:!1});h("card-poster",{glare:!0,shadow:!0,gyroscope:!1});h("card-artwork",{glare:!0,shadow:!0,gyroscope:!1});h("card-high-depth",{glare:!0,shadow:!0,gyroscope:!1,max:10,perspective:1500});const p=document.getElementById("container-grouped");if(p){const e=p.querySelectorAll(".card-grouped");for(const t of e)new c(t,{eventsEl:p,glare:!0,shadow:!0,gyroscope:!1,max:25})}{const e=document.getElementById("card-playground"),t=document.getElementById("playground-controls"),i=document.getElementById("playground-snippet"),o=document.getElementById("ctrl-reset");if(e&&t){let r=new c(e,{gyroscope:!1});const s=a=>document.getElementById(`ctrl-${a}`),n={max:15,perspective:1e3,scale:1.05,speed:200,reverse:!1,glare:!1,maxGlare:.5,shadow:!1,disabled:!1},d=()=>({max:Number(s("max").value),perspective:Number(s("perspective").value),scale:Number(s("scale").value),speed:Number(s("speed").value),reverse:s("reverse").checked,glare:s("glare").checked,maxGlare:Number(s("maxGlare").value),shadow:s("shadow").checked,disabled:s("disabled").checked,gyroscope:!1}),u=()=>{for(const a of["max","perspective","scale","speed","maxGlare"]){const l=document.getElementById(`out-${a}`);l&&(l.textContent=s(a).value)}},y=()=>{if(!i)return;const a=d(),l=[];a.max!==n.max&&l.push(`  max: ${a.max}`),a.perspective!==n.perspective&&l.push(`  perspective: ${a.perspective}`),a.scale!==n.scale&&l.push(`  scale: ${a.scale}`),a.speed!==n.speed&&l.push(`  speed: ${a.speed}`),a.reverse!==n.reverse&&l.push(`  reverse: ${a.reverse}`),a.glare!==n.glare&&l.push(`  glare: ${a.glare}`),a.glare&&a.maxGlare!==n.maxGlare&&l.push(`  maxGlare: ${a.maxGlare}`),a.shadow!==n.shadow&&l.push(`  shadow: ${a.shadow}`),a.disabled!==n.disabled&&l.push(`  disabled: ${a.disabled}`),l.length===0?i.textContent="new Levita(el);":i.textContent=`new Levita(el, {
${l.join(`,
`)},
});`},x=()=>{s("max").value=String(n.max),s("perspective").value=String(n.perspective),s("scale").value=String(n.scale),s("speed").value=String(n.speed),s("reverse").checked=n.reverse,s("glare").checked=n.glare,s("maxGlare").value=String(n.maxGlare),s("shadow").checked=n.shadow,s("disabled").checked=n.disabled,u(),y(),r.destroy(),r=new c(e,{gyroscope:!1})};t.addEventListener("input",()=>{u(),y(),r.destroy(),r=new c(e,d())}),o?.addEventListener("click",x)}}const m=h("card-gyro",{gyroscope:"auto",glare:!0,shadow:!0}),g=document.getElementById("gyro-info");m&&g&&m.on("move",({x:e,y:t})=>{g.textContent=`Gyro active — x: ${e.toFixed(1)}° y: ${t.toFixed(1)}°`});const O=async()=>{const e=document.getElementById("github-stars");if(e)try{const i=await(await fetch("https://api.github.com/repos/Jeromearsene/levita")).json();i.stargazers_count!==void 0?e.textContent=`${i.stargazers_count.toLocaleString()} stars`:e.textContent="GitHub"}catch{e.textContent="GitHub"}};O();
